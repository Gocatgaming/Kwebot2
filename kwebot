import discord
import asyncio
import random
from discord.ext.commands import Bot
from discord.ext import commands
from discord.ext.commands import Bot
from discord.ext import commands
import json
import random
import urllib
import requests
import subprocess
import random
import urllib.request
import json
import datetime
import requests
import os
import sys
import time
import shlex
import shutil
import random
import inspect
import asyncio
import pathlib
import traceback
from random import shuffle, choice
from urllib.parse import urlparse

from json import JSONDecodeError
import re
import logging
import collections
import copy
import asyncio
import math
import time
import inspect
import subprocess
import urllib.parse

client = discord.Client()
bot_prefix= ","
client = commands.Bot(command_prefix=bot_prefix)

@client.event
async def on_ready():
    print("Bot Online!")
    print("Name: {}".format(client.user.name))
    print("ID: {}".format(client.user.id))
    await client.change_presence(game=discord.Game(name=',help for commands! | Currently on ' + str(len(client.servers)) + ' servers'))
    print("------------------------------------")



@client.command(pass_context = True)
async def info(ctx):
    embed = discord.Embed(title = "Kwebot", description= """
 Hello <:blobwave:423568170822008843> My name is Kwebot, I am a moderation bot, My owner is <@164524112037937153> He is really cool, He is my creator, Owner, And my friend, Im currenty being developed in python!"""
                          , color = 0xFFFFF)
    return await client.say(embed = embed)



@client.command(pass_context=True)
async def loveyou(ctx):
    await client.say("Love you too❤, {}".format(client.author.mention))
    author = client.message.author
    print(author, "Loved the bot!")
	
@client.command(pass_context=True)
async def bean(ctx, user):
    await client.say("User was beaned from the server, GET BEANED <:BeanHammer:423620434072829952>")
	
@client.command(pass_context=True)
async def date(ctx):
    today = datetime.date.today()
    todaysdate = today.strftime('%A, %b %Y (%d-%m-%Y)')
    await client.say("Today's date is: {}".format(todaysdate))



		
@client.command(pass_context=True)
async def version(ctx):
    embed=discord.Embed(title="Version", description="Version 0.0.1", color=0x00ffd5)
    embed.set_footer(text="Type ,status to see where the bot is in development or type ,updates to see latest updates")
    await client.say(embed=embed)

@client.command(pass_context=True)
async def status(ctx):
    await client.say("Kwebot is currently in Beta!")

@client.command(pass_context = True)
async def updates(ctx):
    embed=discord.Embed(title="Updates!", description="Version: 0.1.0", color=0x4422e1)
    embed.add_field(name='User', value='Spoopy', inline=False)
    embed.add_field(name='Changes', value='Lots of new commands, and Kwebot now displays how many servers its in via game status!', inline=True)
    await client.say(embed=embed)


@client.command(pass_context = True)
@commands.has_permissions(kick_members=True)
async def kick(ctx, userName: discord.User):
    """Kick A User from server"""
    await client.kick(userName)
    await client.say("__**User Has Been Kicked!**__ <:Thumbup:423571579524349952>")
    



@client.command(pass_context = True)
async def say(ctx, *args):
    mesg = ' '.join(args)
    await client.delete_message(ctx.message)
    return await client.say(mesg)

@client.command(pass_context = True)
@commands.has_permissions(ban_members=True)
async def ban(ctx, userName: discord.User):
    """ban A User from server"""
    await client.ban(userName)
    await client.say("**__User Banned, I hated them anyway.__** https://imgur.com/a/CH0E2")
    


     
@client.command(pass_context = True)
async def clean(ctx, number):
    mgs = [] #Empty list to put all the messages in the log
    number = int(number) #Converting the amount of messages to delete to an integer
    async for x in client.logs_from(ctx.message.channel, limit = number):
        mgs.append(x)
    await client.delete_messages(mgs)
    await client.say("Done! <:Thumbup:423571579524349952>")


@client.command(pass_context = True)
async def nsfwd(ctx):
    nsfw = ['https://hentai.catspot.net/category/hentai/']
    await client.send_typing(ctx.message.channel)
    em = discord.Embed(title="( ͡° ͜ʖ ͡°)", colour=0xCCCCCC)
    em.set_image(url=random.choice(nsfw))
    await client.say(embed=em)

@client.command(pass_context=True)
async def support(ctx):
    """Gives a invite to the main kwebot server"""
    embed=discord.Embed(title="Official Kwebot Discord Server", url="https://discord.gg/k82pCwp", color=0x5eff69)
    await client.say(embed=embed)

@client.command(pass_context=True)
async def invite(ctx):
    """Gives you a invite to invite the bot!"""
    embed=discord.Embed(title="Invite click here", url="https://discordapp.com/oauth2/authorize?client_id=388066248686043147&scope=bot&permissions=8", color=0x5eff69)
    await client.say(embed=embed)

@client.command(pass_context = True)
async def getbans(ctx):
    x = await client.get_bans(ctx.message.server)
    x = '\n'.join([y.name for y in x])
    embed = discord.Embed(title = "List of Banned Members", description = x, color = 0xFFFFF)
    return await client.say(embed = embed)



client.run("Mzg4MDY2MjQ4Njg2MDQzMTQ3.DYsNfg.BRsfIj3xJYKDDRsyGIrKGwBbWG4")
